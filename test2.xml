<?xml version="1.0" encoding="utf-8"?><!DOCTYPE nta PUBLIC '-//Uppaal Team//DTD Flat System 1.1//EN' 'http://www.it.uu.se/research/group/darts/uppaal/flat-1_1.dtd'><nta><declaration>// Place global declarations here.
chan RequestA, AcceptedA, RejectedA, RequestB, AcceptedB, RejectedB, FreeA, FreeB;
chan EntryA, ExitA, EntryB, ExitB;</declaration><template><name x="5" y="5">VAA</name><declaration>// Place local declarations here.
bool requestAsked := false;
bool canPass := false;</declaration><location id="id0" x="-144" y="-240"><name x="-176" y="-280">IdleBridge</name></location><location id="id1" x="-40" y="-112"><name x="-32" y="-144">PassedBridge</name></location><location id="id2" x="-40" y="-192"><name x="-40" y="-224">PassingBridge</name></location><location id="id3" x="-384" y="-240"><name x="-440" y="-280">ApprochingBridge</name></location><location id="id4" x="-464" y="-240"><name x="-474" y="-270">Off</name></location><init ref="id4"/><transition><source ref="id1"/><target ref="id4"/><label kind="assignment" x="-416" y="-136">canPass := false,
requestAsked := false</label><nail x="-424" y="-96"/></transition><transition><source ref="id0"/><target ref="id0"/><label kind="guard" x="-304" y="-360">requestAsked == true</label><label kind="synchronisation" x="-272" y="-344">RejectedA?</label><label kind="assignment" x="-296" y="-328">requestAsked := false</label><nail x="-240" y="-304"/><nail x="-216" y="-304"/></transition><transition><source ref="id0"/><target ref="id0"/><label kind="guard" x="-240" y="-176">requestAsked == false</label><label kind="synchronisation" x="-208" y="-160">RequestA!</label><label kind="assignment" x="-232" y="-144">requestAsked := true</label><nail x="-200" y="-184"/><nail x="-176" y="-168"/></transition><transition><source ref="id2"/><target ref="id1"/><label kind="synchronisation" x="-32" y="-168">ExitA!</label></transition><transition><source ref="id2"/><target ref="id2"/><nail x="96" y="-208"/><nail x="88" y="-184"/></transition><transition><source ref="id0"/><target ref="id2"/><label kind="guard" x="-120" y="-248">canPass == true</label><label kind="synchronisation" x="-96" y="-232">EntryA!</label></transition><transition><source ref="id0"/><target ref="id0"/><label kind="guard" x="-136" y="-344">requestAsked == true</label><label kind="synchronisation" x="-104" y="-328">AcceptedA?</label><label kind="assignment" x="-128" y="-312">canPass := true</label><nail x="-64" y="-296"/><nail x="-48" y="-272"/></transition><transition><source ref="id3"/><target ref="id0"/><label kind="synchronisation" x="-304" y="-280">RequestA!</label><label kind="assignment" x="-336" y="-264">requestAsked := true</label></transition><transition><source ref="id4"/><target ref="id3"/></transition></template><template><name>BridgeControler</name><declaration>// Place local declarations here.
int firstRequest := 0;
int carPassed := 0;</declaration><location id="id5" x="-680" y="-408"><name x="-712" y="-440">AcceptingA</name><committed/></location><location id="id6" x="-416" y="-400"><name x="-456" y="-432">AcceptingB</name><committed/></location><location id="id7" x="-208" y="-216"><name x="-200" y="-240">ProcessingRequestBB</name><committed/></location><location id="id8" x="-160" y="-312"><name x="-184" y="-344">ProcessingRequestAB</name><committed/></location><location id="id9" x="-920" y="-320"><name x="-1016" y="-352">ProcessingRequestAA</name><committed/></location><location id="id10" x="-880" y="-232"><name x="-968" y="-224">ProcessingRequestBA</name><committed/></location><location id="id11" x="-560" y="-336"><name x="-592" y="-368">FirstRequest</name><committed/></location><location id="id12" x="-344" y="-336"><name x="-392" y="-368">VehicleFromB</name></location><location id="id13" x="-768" y="-336"><name x="-808" y="-368">VehicleFromA</name></location><location id="id14" x="-560" y="-240"><name x="-616" y="-224">WaitingRequest</name></location><init ref="id14"/><transition><source ref="id12"/><target ref="id14"/><label kind="synchronisation" x="-448" y="-240">ExitB?</label><label kind="assignment" x="-464" y="-224">carPassed++</label><nail x="-392" y="-240"/></transition><transition><source ref="id13"/><target ref="id14"/><label kind="synchronisation" x="-704" y="-240">ExitA?</label><label kind="assignment" x="-720" y="-224">carPassed++</label><nail x="-736" y="-240"/></transition><transition><source ref="id5"/><target ref="id13"/><label kind="synchronisation" x="-768" y="-400">EntryA?</label></transition><transition><source ref="id6"/><target ref="id12"/><label kind="synchronisation" x="-384" y="-400">EntryB?</label></transition><transition><source ref="id7"/><target ref="id12"/><label kind="synchronisation" x="-312" y="-224">AcceptedB!</label><nail x="-288" y="-232"/></transition><transition><source ref="id12"/><target ref="id7"/><label kind="synchronisation" x="-224" y="-264">RequestB?</label><nail x="-240" y="-264"/></transition><transition><source ref="id8"/><target ref="id12"/><label kind="synchronisation" x="-208" y="-296">RejectedA!</label><nail x="-224" y="-304"/></transition><transition><source ref="id12"/><target ref="id8"/><label kind="synchronisation" x="-288" y="-360">RequestA?</label><nail x="-232" y="-336"/></transition><transition><source ref="id9"/><target ref="id13"/><label kind="synchronisation" x="-928" y="-312">AcceptedA!</label><nail x="-856" y="-304"/></transition><transition><source ref="id13"/><target ref="id9"/><label kind="synchronisation" x="-888" y="-368">RequestA?</label><nail x="-856" y="-344"/></transition><transition><source ref="id10"/><target ref="id13"/><label kind="synchronisation" x="-936" y="-272">RejectedB!</label><nail x="-848" y="-280"/></transition><transition><source ref="id13"/><target ref="id10"/><label kind="synchronisation" x="-816" y="-240">RequestB?</label><nail x="-800" y="-248"/></transition><transition><source ref="id11"/><target ref="id6"/><label kind="guard" x="-544" y="-416">firstRequest == 2</label><label kind="synchronisation" x="-536" y="-400">AcceptedB!</label></transition><transition><source ref="id11"/><target ref="id5"/><label kind="guard" x="-664" y="-424">firstRequest == 1</label><label kind="synchronisation" x="-648" y="-408">AcceptedA!</label></transition><transition><source ref="id14"/><target ref="id11"/><label kind="synchronisation" x="-528" y="-304">RequestB?</label><label kind="assignment" x="-536" y="-288">firstRequest := 2</label><nail x="-536" y="-280"/></transition><transition><source ref="id14"/><target ref="id11"/><label kind="synchronisation" x="-656" y="-304">RequestA?</label><label kind="assignment" x="-688" y="-288">firstRequest := 1</label><nail x="-584" y="-280"/></transition></template><template><name>Bridge</name><declaration>// Place local declarations here.</declaration><location id="id15" x="-48" y="8"><name x="-80" y="16">ReleasingB</name></location><location id="id16" x="-256" y="0"><name x="-288" y="16">ReleasingA</name></location><location id="id17" x="-360" y="-24"><name x="-370" y="-54">DirA</name></location><location id="id18" x="32" y="-24"><name x="22" y="-54">DirB</name></location><location id="id19" x="-152" y="-24"><name x="-176" y="-56">Empty</name></location><init ref="id19"/><transition><source ref="id15"/><target ref="id19"/><label kind="synchronisation" x="-128" y="-8">FreeB!</label></transition><transition><source ref="id16"/><target ref="id19"/><label kind="synchronisation" x="-216" y="-8">FreeA!</label></transition><transition><source ref="id17"/><target ref="id16"/><label kind="synchronisation" x="-344" y="-8">ExitA?</label></transition><transition><source ref="id18"/><target ref="id15"/><label kind="synchronisation" x="8" y="-8">ExitB?</label></transition><transition><source ref="id19"/><target ref="id17"/><label kind="synchronisation" x="-288" y="-72">EntryA?</label><nail x="-264" y="-48"/></transition><transition><source ref="id19"/><target ref="id18"/><label kind="synchronisation" x="-72" y="-64">EntryB?</label><nail x="-56" y="-40"/></transition></template><template><name>VAB</name><declaration>// Place local declarations here.
bool requestAsked := false;
bool canPass := false;</declaration><location id="id20" x="104" y="80"><name x="64" y="88">PassedBridge</name></location><location id="id21" x="104" y="16"><name x="94" y="-14">PassingBridge</name></location><location id="id22" x="-16" y="-40"><name x="-48" y="-72">IdleBridge</name></location><location id="id23" x="-272" y="-40"><name x="-328" y="-72">ApprochingBridge</name></location><location id="id24" x="-344" y="-40"><name x="-354" y="-70">Off</name></location><init ref="id24"/><transition><source ref="id20"/><target ref="id24"/><label kind="assignment" x="-288" y="56">canPass := false,
requestAsked := false</label><nail x="-288" y="104"/></transition><transition><source ref="id21"/><target ref="id21"/><nail x="208" y="8"/><nail x="208" y="32"/></transition><transition><source ref="id22"/><target ref="id22"/><label kind="guard" x="-128" y="32">requestAsked == false</label><label kind="synchronisation" x="-88" y="48">RequestB!</label><label kind="assignment" x="-120" y="64">requestAsked := true</label><nail x="-32" y="-24"/><nail x="-64" y="24"/><nail x="-40" y="32"/></transition><transition><source ref="id22"/><target ref="id22"/><label kind="guard" x="40" y="-112">requestAsked == true</label><label kind="synchronisation" x="72" y="-96">AcceptedB?</label><label kind="assignment" x="64" y="-80">canPass := true</label><nail x="48" y="-88"/><nail x="64" y="-72"/></transition><transition><source ref="id22"/><target ref="id22"/><label kind="guard" x="-152" y="-152">requestAsked == true</label><label kind="synchronisation" x="-128" y="-136">RejectedB?</label><label kind="assignment" x="-152" y="-120">requestAsked := false</label><nail x="-112" y="-96"/><nail x="-88" y="-104"/></transition><transition><source ref="id21"/><target ref="id20"/><label kind="synchronisation" x="112" y="32">ExitB!</label></transition><transition><source ref="id22"/><target ref="id21"/><label kind="guard" x="24" y="-48">canPass == true</label><label kind="synchronisation" x="40" y="-32">EntryB!</label></transition><transition><source ref="id23"/><target ref="id22"/><label kind="synchronisation" x="-168" y="-80">RequestB!</label><label kind="assignment" x="-200" y="-64">requestAsked := true</label></transition><transition><source ref="id24"/><target ref="id23"/></transition></template><system>// Place template instantiations here.
vehicleA = VAA();
vehicleB = VAB();
PCTL = BridgeControler();
//P = Bridge();

// List one or more processes to be composed into a system.
system vehicleA, vehicleB, PCTL;</system></nta>